---
title: "ã¯ã˜ã‚ã¦ã®ãƒ¢ãƒŽãƒ¬ãƒæ§‹ç¯‰è¨˜éŒ² â€“ pnpm Ã— Turborepo Ã— AWS ã§å°‘ã—ãšã¤æ•´ãˆã¦ã¿ãŸ"
emoji: "ðŸ’¨"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["AWS","Monorepo","pnpm","Turborepo","GitHubActions"]
published: false
---

# **ã¯ã˜ã‚ã«**
## æœ¬è¨˜äº‹ã®ç›®çš„
æœ¬è¨˜äº‹ã§ã¯ã€ç§ãŒã“ã‚Œã¾ã§ã«æ§‹ç¯‰ã—ã¦ããŸãƒ¢ãƒŽãƒ¬ãƒç’°å¢ƒã®ä»•æ§˜ã¨è¨­è¨ˆã«ã¤ã„ã¦æ•´ç†ã—ã€æŠ€è¡“çš„ãªèƒŒæ™¯ã‚„æŽ¡ç”¨ã—ãŸãƒ„ãƒ¼ãƒ«ç¾¤ã‚’ä½“ç³»çš„ã«ã¾ã¨ã‚ã¾ã™ã€‚  
ã“ã®ç’°å¢ƒã¯ã€è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åŠ¹çŽ‡çš„ã«ç®¡ç†ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€CI/CDãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»é–‹ç™ºä½“é¨“ï¼ˆDXï¼‰ã¾ã§ã‚’å«ã‚ãŸçµ±åˆçš„ãªé–‹ç™ºåŸºç›¤ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚  

å˜ãªã‚‹å‚™å¿˜éŒ²ã«ç•™ã‚ãšã€åŒã˜ã‚ˆã†ã«ãƒ¢ãƒŽãƒ¬ãƒã‚’å°Žå…¥ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚„ãƒãƒ¼ãƒ ã«ã¨ã£ã¦ã€å‚è€ƒã«ãªã‚‹å®Ÿè·µçš„ãªçŸ¥è¦‹ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã‚’ç‹™ã„ã¨ã—ã¦ã„ã¾ã™ã€‚

## å¯¾è±¡èª­è€…
- ãƒ¢ãƒŽãƒ¬ãƒç’°å¢ƒã®å°Žå…¥ã‚’æ¤œè¨Žã—ã¦ã„ã‚‹å€‹äººé–‹ç™ºè€…ã‚„å°è¦æ¨¡ãƒãƒ¼ãƒ   
- AWSãƒ»GitHub Actionsãƒ»pnpmãƒ»Turborepo ã¨ã„ã£ãŸãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºã‚¹ã‚¿ãƒƒã‚¯ã«é–¢å¿ƒã®ã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢  
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã‚„ CI/CD ã‚’çµ„ã¿è¾¼ã‚“ã çµ±åˆçš„ãªé–‹ç™ºåŸºç›¤ã‚’è¨­è¨ˆã—ãŸã„äºº  
- DevContainer ã‚„ VS Code ã‚’æ´»ç”¨ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨ CI ç’°å¢ƒã‚’çµ±ä¸€ã—ãŸã„äºº  

## ãƒ¢ãƒŽãƒ¬ãƒã‚’æŽ¡ç”¨ã—ãŸèƒŒæ™¯
å¾“æ¥ã®è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªç®¡ç†ã§ã¯ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚  

- å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã”ã¨ã«ä¾å­˜é–¢ä¿‚ã‚„ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã‚’å€‹åˆ¥ç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹  
- å…±é€šã‚³ãƒ¼ãƒ‰ã‚„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å†åˆ©ç”¨ãŒç…©é›‘ã«ãªã‚Šã€æ›´æ–°ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒåˆ†æ•£ã—ã¦ã—ã¾ã†  
- CI/CD ã®è¨­å®šãŒãƒªãƒã‚¸ãƒˆãƒªã”ã¨ã«åˆ†æ•£ã—ã€é‹ç”¨ã‚³ã‚¹ãƒˆãŒé«˜ããªã‚‹  

ã“ã‚Œã‚‰ã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ãƒ¢ãƒŽãƒ¬ãƒã‚’æŽ¡ç”¨ã—ã¾ã—ãŸã€‚  
ãƒ¢ãƒŽãƒ¬ãƒåŒ–ã™ã‚‹ã“ã¨ã§ä»¥ä¸‹ã®åˆ©ç‚¹ã‚’å¾—ã¦ã„ã¾ã™ã€‚  

- **ä¾å­˜é–¢ä¿‚ã®ä¸€å…ƒç®¡ç†**ï¼špnpm workspace ã«ã‚ˆã£ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã‚¢ãƒ—ãƒªé–“ã®ä¾å­˜ã‚’åŠ¹çŽ‡çš„ã«è§£æ±º  
- **ãƒ“ãƒ«ãƒ‰ãƒ»ã‚¿ã‚¹ã‚¯ã®é«˜é€ŸåŒ–**ï¼šTurborepo ã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ä¸¦åˆ—å®Ÿè¡Œã§é–‹ç™ºåŠ¹çŽ‡ã‚’å‘ä¸Š  
- **çµ±åˆçš„ãªCI/CD**ï¼šGitHub Actions ã‚’ä¸­å¿ƒã«ã€dev / prod ç’°å¢ƒã«å¿œã˜ãŸãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–  
- **ã‚³ãƒ¼ãƒ‰å“è³ªã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‹…ä¿**ï¼šESLint, Prettier, Husky, Gitleaks ãªã©ã«ã‚ˆã‚‹é–‹ç™ºæ®µéšŽã§ã®å“è³ªãƒã‚§ãƒƒã‚¯  
- **çµ±ä¸€ã•ã‚ŒãŸé–‹ç™ºä½“é¨“**ï¼šDevContainer ã¨ VS Code ã«ã‚ˆã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ«ã¨CIç’°å¢ƒã‚’ä¸€è‡´ã•ã›å†ç¾æ€§ã‚’ç¢ºä¿  

ã“ã‚Œã‚‰ã®èƒŒæ™¯ã‚’è¸ã¾ãˆã€æœ¬è¨˜äº‹ã§ã¯ã€Œä»•æ§˜ã€ã¨ã€Œè¨­è¨ˆã€ã¨ã„ã†2ã¤ã®è¦³ç‚¹ã‹ã‚‰ãƒ¢ãƒŽãƒ¬ãƒç’°å¢ƒã‚’æ•´ç†ã—ã¦ã„ãã¾ã™ã€‚

# **ãƒ¢ãƒŽãƒ¬ãƒã®å…¨ä½“ä»•æ§˜**
## ç®¡ç†ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ§‹æˆ
æœ€åˆã¯ã€Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä¸€ç·’ã«ç®¡ç†ã—ãŸã„ã€ã¨ã„ã†ã‚·ãƒ³ãƒ—ãƒ«ãªå‹•æ©Ÿã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã—ã¾ã—ãŸã€‚  
å€‹åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†ã—ã¦ã„ãŸã¨ãã¯ã€ã¡ã‚‡ã£ã¨ã—ãŸå¤‰æ›´ã§ã‚‚è¤‡æ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’è¡Œãæ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€åŠ¹çŽ‡ãŒæ‚ªã„ã¨æ„Ÿã˜ã¦ã„ã¾ã—ãŸã€‚  

ãã“ã§ã€ãƒ¢ãƒŽãƒ¬ãƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã‚’æŽ¡ç”¨ã—ã¾ã—ãŸã€‚  

- `apps/` : å®Ÿéš›ã«å‹•ä½œã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é…ç½®  
  - ä¾‹: Web ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰, API ã‚µãƒ¼ãƒãƒ¼  
- `packages/` : è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰åˆ©ç”¨ã™ã‚‹å…±é€šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’é…ç½®  
  - ä¾‹: infraï¼ˆã‚¤ãƒ³ãƒ•ãƒ©å®šç¾©ï¼‰, uiï¼ˆå…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰, utilsï¼ˆå…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼‰  

ã“ã®ã€Œappsã€ã¨ã€Œpackagesã€ã®2éšŽå±¤ã§æ•´ç†ã™ã‚‹ã“ã¨ã§ã€æœ€åˆã‹ã‚‰éŽåº¦ã«è¤‡é›‘ã«ã›ãšã€å¿…è¦ã«å¿œã˜ã¦æ‹¡å¼µã—ã¦ã„ã‘ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

---

## ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®åŸºæœ¬æ–¹é‡
ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†ã«ã¯ **pnpm workspace** ã‚’æŽ¡ç”¨ã—ã¾ã—ãŸã€‚  

ç†ç”±ã¯æ¬¡ã®é€šã‚Šã§ã™ã€‚  
- node_modules ã‚’è³¢ãå…±æœ‰ã—ã¦ãã‚Œã‚‹ãŸã‚ã€ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚é–“ã‚’ç¯€ç´„ã§ãã‚‹  
- ã‚¢ãƒ—ãƒªã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–“ã®ä¾å­˜é–¢ä¿‚ã‚’ `pnpm-workspace.yaml` ã§ã‚·ãƒ³ãƒ—ãƒ«ã«å®šç¾©ã§ãã‚‹  
- æœ€åˆã®å°ã•ãªæ§‹æˆã‹ã‚‰å¤§è¦æ¨¡ãªæ‹¡å¼µã¾ã§å¯¾å¿œã§ãã‚‹æŸ”è»Ÿæ€§ãŒã‚ã‚‹  

ã€Œã¾ãšã¯å‹•ãã‚‚ã®ã‚’ä½œã‚ŠãŸã„ã€ã¨ã„ã†æ°—æŒã¡ã§é¸ã³ã¾ã—ãŸãŒã€çµæžœçš„ã«å¾Œã‹ã‚‰è¿½åŠ ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ã‚¢ãƒ—ãƒªã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«çµ±åˆã§ãã¦ã„ã¾ã™ã€‚

---

## é–‹ç™ºç’°å¢ƒã®å‰ææ¡ä»¶
é–‹ç™ºç’°å¢ƒã‚’æƒãˆã‚‹ã®ã¯ã€é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã§ã—ãŸã€‚  

- **ã‚¨ãƒ‡ã‚£ã‚¿**ã¯ VS Code ã‚’æŽ¡ç”¨ã—ã€å…¨å“¡ãŒåŒã˜é–‹ç™ºä½“é¨“ã‚’å¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ  
- **DevContainer** ã‚’ç”¨æ„ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãŒã©ã“ã§ã‚‚å†ç¾ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ  
- Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ AWS CLI ãªã©ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã‚‚ã‚³ãƒ³ãƒ†ãƒŠã§çµ±ä¸€ã—ã€ç’°å¢ƒä¾å­˜ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’æ¸›ã‚‰ã—ã¾ã—ãŸ  

ã“ã®ãŠã‹ã’ã§ã€Œç’°å¢ƒæ§‹ç¯‰ã§ã¤ã¾ãšãã€ã“ã¨ãŒã»ã¼ãªããªã‚Šã€é–‹ç™ºã«å…¥ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚  

---

## æŒ¯ã‚Šè¿”ã‚Š
ã“ã†ã—ã¦å…¨ä½“ä»•æ§˜ã‚’æ•´ç†ã™ã‚‹ã¨ã€å½“åˆã¯ã€Œã¨ã«ã‹ãä¸€ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã‚‹ã€ã“ã¨ã‹ã‚‰å§‹ã‚ãŸã®ã§ã™ãŒã€çµæžœçš„ã«  
- **apps ã¨ packages ã®å½¹å‰²åˆ†æ‹…**  
- **pnpm workspace ã«ã‚ˆã‚‹ä¾å­˜é–¢ä¿‚ç®¡ç†**  
- **DevContainer ã«ã‚ˆã‚‹å†ç¾æ€§ã®é«˜ã„é–‹ç™ºç’°å¢ƒ**  

ã¨ã„ã£ãŸè¦ç´ ãŒè‡ªç„¶ã¨æƒã£ã¦ã„ãã¾ã—ãŸã€‚  

å¤§ããªè¨­è¨ˆã‚’ã„ããªã‚Šç›®æŒ‡ã™ã‚ˆã‚Šã‚‚ã€**ã€Œå°ã•ãå§‹ã‚ã¦å¾Œã‹ã‚‰æ‹¡å¼µã™ã‚‹ã€** ã¨ã„ã†æµã‚ŒãŒè‡ªåˆ†ã«ã¯åˆã£ã¦ã„ãŸã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

# ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ç¾¤ã®ä¸€è¦§

ãƒ¢ãƒŽãƒ¬ãƒã‚’æ§‹ç¯‰ã™ã‚‹ã«ã‚ãŸã‚Šã€ã•ã¾ã–ã¾ãªãƒ„ãƒ¼ãƒ«ã‚’è©¦ã—ã¾ã—ãŸã€‚  
æœ€åˆã‹ã‚‰ã™ã¹ã¦ã‚’æƒãˆã¦ã„ãŸã‚ã‘ã§ã¯ãªãã€ã€Œã“ã‚ŒãŒå¿…è¦ã‹ã‚‚ã€ã¨æ€ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è¿½åŠ ã—ã¦ã„ãã¾ã—ãŸã€‚  
ã“ã“ã§ã¯ç¾åœ¨åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ç¾¤ã¨ã€ãã‚Œãžã‚Œã‚’å°Žå…¥ã—ãŸç†ç”±ãƒ»å½¹å‰²ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

---

## é–‹ç™ºç’°å¢ƒ
- **VS Code**  
  ã‚¨ãƒ‡ã‚£ã‚¿ã¯ VS Code ã‚’æ¨™æº–ã¨ã—ã¾ã—ãŸã€‚æ‹¡å¼µæ©Ÿèƒ½ãŒè±Šå¯Œã§ã€TypeScript ã‚„ AWS é–‹ç™ºã¨ã®ç›¸æ€§ã‚‚è‰¯ã„ãŸã‚ã§ã™ã€‚  
- **DevContainer**  
  é–‹ç™ºç’°å¢ƒã‚’ãƒãƒ¼ãƒ ã‚„ CI ã¨æƒãˆã‚‹ãŸã‚ã«å°Žå…¥ã—ã¾ã—ãŸã€‚Node.js ã‚„ AWS CLI ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«ã¾ã¨ã‚ã€ç’°å¢ƒå·®ç•°ã«ã‚ˆã‚‹ãƒˆãƒ©ãƒ–ãƒ«ã‚’é¿ã‘ã¦ã„ã¾ã™ã€‚  

---

## ç”ŸæˆAI
- **Amazon Q Developer CLI**  
  é–‹ç™ºä¸­ã®è©¦è¡ŒéŒ¯èª¤ã‚’è£œåŠ©ã™ã‚‹ãŸã‚ã«æ´»ç”¨ã—ã¦ã„ã¾ã™ã€‚ã‚¿ã‚¹ã‚¯ã‚„ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ãªãŒã‚‰ã€ãƒ¢ãƒŽãƒ¬ãƒã®æ•´å‚™ã‚’é€²ã‚ã‚„ã™ãã—ã¦ã„ã¾ã™ã€‚  

- **Chat GPT Plus**
  ã‚»ã‚«ãƒ³ãƒ‰ã‚ªãƒ”ãƒ‹ã‚ªãƒ³çš„ã«åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ã“ã¡ã‚‰ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦åˆ©ç”¨ã—ã¦ã„ã‚‹ã®ã§ãªãã€æ–¹é‡ãªã©ã‚’å£æ‰“ã¡ã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã—ã¾ã—ãŸã€‚ã‚¹ãƒžãƒ›ã‚¢ãƒ—ãƒªã§ç§»å‹•ä¸­ãªã©ã«é ­ã®æ•´ç†ã‚’ã§ãã‚‹ã®ãŒæœ€å¤§ã®åˆ©ç‚¹ã ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

---

## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†
- **pnpm**  
  workspace æ©Ÿèƒ½ãŒå¼·åŠ›ã§ã€ãƒ¢ãƒŽãƒ¬ãƒã¨ã®ç›¸æ€§ãŒéžå¸¸ã«è‰¯ã„ã§ã™ã€‚  
  npm ã‚„ yarn ã‚ˆã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«é€Ÿåº¦ãŒé€Ÿãã€ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ã‚‚ç¯€ç´„ã§ãã¾ã™ã€‚  

---

## ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼
- **Turborepo**  
  ãƒ¢ãƒŽãƒ¬ãƒå†…ã®ã‚¿ã‚¹ã‚¯ã‚’åŠ¹çŽ‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã«å°Žå…¥ã—ã¾ã—ãŸã€‚  
  ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®ãŠã‹ã’ã§ã€å¤‰æ›´ãŒãªã„éƒ¨åˆ†ã®ãƒ“ãƒ«ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã€é–‹ç™ºåŠ¹çŽ‡ãŒå¤§å¹…ã«æ”¹å–„ã—ã¾ã—ãŸã€‚  

---

## ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†
- **AWS CDK**  
  ç¾çŠ¶ã¯ã¾ã  S3 ãƒã‚±ãƒƒãƒˆã®æ§‹ç¯‰ã«ã¨ã©ã¾ã£ã¦ã„ã¾ã™ãŒã€å°†æ¥çš„ã« IaC (Infrastructure as Code) ã‚’æœ¬æ ¼å°Žå…¥ã™ã‚‹ãŸã‚ã«é¸æŠžã—ã¾ã—ãŸã€‚  
  TypeScript ã§æ›¸ã‘ã‚‹ãŸã‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚„ API ã¨åŒã˜è¨€èªžã§çµ±ä¸€ã§ãã‚‹ç‚¹ã‚‚é­…åŠ›ã§ã™ã€‚  

---

## CI/CD
- **GitHub Actions**  
  ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ãƒ–ãƒ©ãƒ³ãƒã¸ã® push ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã€Lint ã‚„ãƒ†ã‚¹ãƒˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è‡ªå‹•åŒ–ã—ã¦ã„ã¾ã™ã€‚  
  OIDC ã‚’ä½¿ã£ãŸ AWS èªè¨¼ã‚’çµ„ã¿è¾¼ã¿ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ã¾ã—ãŸã€‚  

---

## ã‚³ãƒ¼ãƒ‰å“è³ª
- **ESLint**  
  TypeScript/JavaScript ã®é™çš„è§£æžã‚’è¡Œã„ã€ãƒã‚°ã‚’é˜²ãŽã¾ã™ã€‚  
- **Prettier**  
  ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã‚’çµ±ä¸€ã—ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã®ç„¡é§„ãªå·®åˆ†ã‚’æ¸›ã‚‰ã—ã¾ã—ãŸã€‚  
- **Markdownlint**  
  ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆREADME ã‚„ãƒ–ãƒ­ã‚°è¨˜äº‹ï¼‰ã®æ•´å½¢ãƒ«ãƒ¼ãƒ«ã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚  

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **Gitleaks**  
  èª¤ã£ã¦ API Key ã‚„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚ˆã†ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚  
  Husky ã® pre-commit ãƒ•ãƒƒã‚¯ã¨é€£æºã—ã¦ã€è‡ªå‹•çš„ã«ãƒã‚§ãƒƒã‚¯ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  

---

## ãƒ†ã‚¹ãƒˆ
- **Jest**  
  åŸºæœ¬çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦æŽ¡ç”¨ã—ã¾ã—ãŸã€‚  
- **Vitest**  
  ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®ãƒ†ã‚¹ãƒˆã§ã¯ Jest ã‚ˆã‚Šè»½é‡ãª Vitest ã‚‚è©¦ã—ã¦ã„ã¾ã™ã€‚  
- **React Testing Library**  
  React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æŒ™å‹•ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›®ç·šã§æ¤œè¨¼ã™ã‚‹ãŸã‚ã«å°Žå…¥ã—ã¾ã—ãŸã€‚  

---

## Git Hooks
- **Husky**  
  Git ãƒ•ãƒƒã‚¯ã‚’ç°¡å˜ã«è¨­å®šã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚  
  `pre-commit` ã§ Lint ã‚„ Gitleaks ã‚’å®Ÿè¡Œã—ã€å•é¡ŒãŒã‚ã‚Œã°ã‚³ãƒŸãƒƒãƒˆã§ããªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚  

---

## æŒ¯ã‚Šè¿”ã‚Š
ã“ã†ã—ã¦è¦‹ã‚‹ã¨ã€ãƒ¢ãƒŽãƒ¬ãƒã®ä»•æ§˜ã‚’æ”¯ãˆã¦ã„ã‚‹ã®ã¯ã€Œä¸€åº¦ã«å°Žå…¥ã—ãŸãƒ„ãƒ¼ãƒ«ã€ã§ã¯ãªãã€å¿…è¦ã«å¿œã˜ã¦å°‘ã—ãšã¤è¿½åŠ ã—ã¦ããŸã‚‚ã®ã°ã‹ã‚Šã§ã™ã€‚  
æœ€åˆã¯ **pnpm + Turborepo** ã®æœ€ä½Žé™ã®ã‚»ãƒƒãƒˆã‹ã‚‰å§‹ã‚ã€å¾Œã‹ã‚‰ **ESLint, Prettier, Husky, Gitleaks** ã‚’è¶³ã—ã¦ã„ãã¾ã—ãŸã€‚  

åˆå¿ƒè€…ã¨ã—ã¦ã¯ã€Œã„ããªã‚Šå®Œç’§ãªã‚¹ã‚¿ãƒƒã‚¯ã‚’çµ„ã‚€ã€ã®ã¯é›£ã—ã„ã§ã™ãŒã€æ®µéšŽçš„ã«å°Žå…¥ã—ã¦ã„ãã“ã¨ã§çµæžœçš„ã«ä»Šã®ã‚ˆã†ãªæ§‹æˆã«è‚²ã¡ã¾ã—ãŸã€‚

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­è¨ˆ

## apps/ ã¨ packages/ ã®å½¹å‰²
ãƒ¢ãƒŽãƒ¬ãƒã‚’å§‹ã‚ãŸã¨ãã«ä¸€ç•ªè¿·ã£ãŸã®ãŒã€Œã©ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹ã‹ã€ã§ã—ãŸã€‚  
æœ€åˆã¯å…¨éƒ¨ã‚’ä¸€ã¤ã®ãƒ•ã‚©ãƒ«ãƒ€ã«å…¥ã‚Œã¦ã„ã¾ã—ãŸãŒã€ã ã‚“ã ã‚“ç®¡ç†ãŒå¤§å¤‰ã«ãªã£ã¦ããŸã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ§‹æˆã«è½ã¡ç€ãã¾ã—ãŸã€‚

- **apps/**  
  å®Ÿéš›ã«å‹•ãã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç½®ãå ´æ‰€ã§ã™ã€‚  
  ä¾‹:  
  - `web/` (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰SPA)  
  - `api/` (APIã‚µãƒ¼ãƒãƒ¼)  

- **packages/**  
  è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã§ä½¿ã†å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç½®ãå ´æ‰€ã§ã™ã€‚  
  ä¾‹:  
  - `infra/` (CDKã«ã‚ˆã‚‹ã‚¤ãƒ³ãƒ•ãƒ©å®šç¾©)  
  - `ui/` (å…±é€šReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)  
  - `utils/` (å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°)  

ã“ã®åˆ†ã‘æ–¹ã¯ã‚·ãƒ³ãƒ—ãƒ«ã§ã™ãŒã€**ã€Œã‚¢ãƒ—ãƒªã€ã¨ã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã‚’ç‰©ç†çš„ã«åˆ†ã‘ã‚‹ã€**ã“ã¨ã§é ­ã®æ•´ç†ãŒã¤ãã‚„ã™ããªã‚Šã¾ã—ãŸã€‚  

---

## pnpm-workspace.yaml ã®å®šç¾©
pnpm ã§ã¯ `pnpm-workspace.yaml` ã‚’ä½¿ã£ã¦ã€ã©ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å«ã‚ã‚‹ã‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚  
ç§ã®è¨­å®šã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```yaml
packages:
  - "apps/*"
  - "packages/*"
```

ã“ã†ã™ã‚‹ã“ã¨ã§ã€apps/ ã¨ packages/ é…ä¸‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒè‡ªå‹•çš„ã«ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨ã—ã¦èªè­˜ã•ã‚Œã¾ã™ã€‚
ã“ã‚Œã«ã‚ˆã£ã¦ã€ä¾‹ãˆã° apps/web ãŒ packages/ui ã«ä¾å­˜ã™ã‚‹å ´åˆã§ã‚‚ã€ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ã«ã¯ç›´æŽ¥ãƒªãƒ³ã‚¯ã•ã‚Œã‚‹ã®ã§ã€å¤‰æ›´ãŒã™ãåæ˜ ã•ã‚Œã‚‹ã®ãŒä¾¿åˆ©ã§ã™ã€‚


## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“ä¾å­˜é–¢ä¿‚ã®æ–¹é‡

åˆå¿ƒè€…ã®ã†ã¡ã¯ã€Œä¾å­˜é–¢ä¿‚ãŒãã¡ã‚ƒãã¡ã‚ƒã«ãªã‚‹ã®ã§ã¯ï¼Ÿã€ã¨ã„ã†ä¸å®‰ãŒã‚ã‚Šã¾ã—ãŸã€‚
ãã“ã§ã€è‡ªåˆ†ãªã‚Šã«ä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã‚’ç½®ãã¾ã—ãŸã€‚
apps â†’ packages ã¸ã®ä¾å­˜ã¯OK
ã‚¢ãƒ—ãƒªã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†æƒ³å®šãªã®ã§ä¾å­˜ã—ã¦ã‚ˆã„
packages â†’ apps ã¸ã®ä¾å­˜ã¯NG

å…±é€šãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚¢ãƒ—ãƒªã«ä¾å­˜ã™ã‚‹ã¨å¾ªç’°å‚ç…§ã«ãªã‚Šã‚„ã™ã„ãŸã‚ç¦æ­¢
packages åŒå£«ã®ä¾å­˜ã¯æœ€å°é™ã«
ã©ã†ã—ã¦ã‚‚å¿…è¦ãªå ´åˆã ã‘ä¾å­˜ã™ã‚‹ï¼ˆutils ãªã©æ±Žç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä¾‹å¤–ï¼‰
ã“ã†ã—ãŸãƒ«ãƒ¼ãƒ«ã‚’æ±ºã‚ãŸã“ã¨ã§ã€ä¾å­˜é–¢ä¿‚ãŒè¤‡é›‘ã«ãªã‚Šã™ãŽãšã€ç®¡ç†ãŒã—ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚


## æŒ¯ã‚Šè¿”ã‚Š

æœ€åˆã¯ã€Œãƒ¢ãƒŽãƒ¬ãƒã£ã¦é›£ã—ãã†ã€ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹ã¨apps ã¨ packages ã‚’åˆ†ã‘ã‚‹ã ã‘ã§ã‚‚é ­ãŒæ•´ç†ã§ãã‚‹ã€pnpm-workspace.yaml ã‚’æ›¸ãã ã‘ã§ä¾å­˜ç®¡ç†ãŒæ¥½ã«ãªã‚‹ã€ã¨ã€æ„å¤–ã¨ã‚·ãƒ³ãƒ—ãƒ«ã«å§‹ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
ã“ã®ã‚ãŸã‚Šã‹ã‚‰ã€Œãƒ¢ãƒŽãƒ¬ãƒã£ã¦å®Ÿã¯åˆå¿ƒè€…ã«ã‚‚å„ªã—ã„ã®ã§ã¯ï¼Ÿã€ã¨æ„Ÿã˜å§‹ã‚ã¾ã—ãŸã€‚



# ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­è¨ˆ

ãƒ¢ãƒŽãƒ¬ãƒã‚’å°Žå…¥ã—ãŸã¨ãã«æ¬¡ã«æ‚©ã‚“ã ã®ãŒã€**ã€Œè¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆã‚’ã©ã†åŠ¹çŽ‡ã‚ˆãå›žã™ã‹ã€**ã§ã—ãŸã€‚  
å˜ç´”ã« `pnpm -r build` ã®ã‚ˆã†ã«å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¯Žå›žå®Ÿè¡Œã™ã‚‹ã¨ã€å¤‰æ›´ãŒãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚‚ãƒ“ãƒ«ãƒ‰ã•ã‚Œã¦ã—ã¾ã„ã€æ™‚é–“ãŒç„¡é§„ã«ãªã‚Šã¾ã™ã€‚  

ãã“ã§å°Žå…¥ã—ãŸã®ãŒ **Turborepo** ã§ã™ã€‚  
ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„ä¾å­˜è§£æ±ºã®ä»•çµ„ã¿ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å®Ÿéš›ã®é–‹ç™ºåŠ¹çŽ‡ãŒå¤§ããå¤‰ã‚ã‚Šã¾ã—ãŸã€‚

---

## Turborepo ã«ã‚ˆã‚‹ã‚¿ã‚¹ã‚¯å®šç¾©

Turborepo ã§ã¯ã€ãƒ«ãƒ¼ãƒˆã« `turbo.json` ã‚’é…ç½®ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚  
ç§ã®æœ€åˆã®è¨­å®šã¯ã‚·ãƒ³ãƒ—ãƒ«ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã§ã—ãŸã€‚

```json
{
  "$schema": "https://turbo.build/schema.json",
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**", "build/**"]
    },
    "lint": {
      "outputs": []
    },
    "test": {
      "dependsOn": ["^build"],
      "outputs": []
    },
    "dev": {
      "cache": false
    }
  }
}
```
ã“ã“ã§ã®ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã§ã™ã€‚

- build ã‚¿ã‚¹ã‚¯
è‡ªåˆ†è‡ªèº«ã®ãƒ“ãƒ«ãƒ‰ã ã‘ã§ãªãã€ä¾å­˜ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã‚‚å®Ÿè¡Œã•ã‚Œã‚‹

- lint / test
ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯èƒ½ã ãŒæˆæžœç‰©ã‚’æ®‹ã•ãªã„ã®ã§ outputs ã¯ç©º

- dev
ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ãªã®ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ç„¡åŠ¹åŒ–

ã“ã®æœ€å°æ§‹æˆã ã‘ã§ã‚‚ã€Œã©ã®ã‚¿ã‚¹ã‚¯ãŒã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‹ã€ã‚’æ˜Žç¤ºã§ãã€å…¨ä½“ã‚’è¦‹æ¸¡ã—ã‚„ã™ããªã‚Šã¾ã—ãŸã€‚

## ä¸¦åˆ—å®Ÿè¡Œã¨ä¾å­˜è§£æ±º

Turborepo ã¯ã‚¿ã‚¹ã‚¯ã‚’ä¸¦åˆ—ã§å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚
ä¾‹ãˆã° turbo run build ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ãŸä¸Šã§ã€ç‹¬ç«‹ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¯åŒæ™‚ã«èµ°ã‚Šã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã£ã¦ã€Œå¾…ã¡æ™‚é–“ãŒé•·ã„ãƒ“ãƒ«ãƒ‰ã€ã‚‚ä¸¦åˆ—åŒ–ã•ã‚Œã€å¾“æ¥ã®ç›´åˆ—å®Ÿè¡Œã‚ˆã‚Šã‹ãªã‚Šæ—©ããªã‚Šã¾ã—ãŸã€‚
å°ã•ãªæ”¹å–„ã«è¦‹ãˆã¦ã€æ—¥ã€…ã®é–‹ç™ºä½“é¨“ã«å¤§ããåŠ¹ã„ã¦ãã¾ã™ã€‚

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ»ãƒªãƒ¢ãƒ¼ãƒˆï¼‰

Turborepo ã®æœ€å¤§ã®é­…åŠ›ã¯ ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ ã§ã™ã€‚

### ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥
ç›´å‰ã«å®Ÿè¡Œã—ãŸã‚¿ã‚¹ã‚¯ã®çµæžœã‚’ä¿å­˜ã—ã€åŒã˜å…¥åŠ›ãªã‚‰å†å®Ÿè¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚
ä¾‹: å‰å›žãƒ“ãƒ«ãƒ‰ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ãŒå¤‰ã‚ã£ã¦ã„ãªã‘ã‚Œã°ã€æ¬¡å›žã¯ã€Œã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆã€ã§çž¬æ™‚ã«å®Œäº†ã—ã¾ã™ã€‚

### ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥
ï¼ˆæœªå°Žå…¥ã§ã™ãŒï¼‰å°†æ¥çš„ã«ã¯ CI ã¨ã®é€£æºã§æ´»ç”¨äºˆå®šã§ã™ã€‚é–‹ç™ºè€…ã®ãƒ­ãƒ¼ã‚«ãƒ«ã¨ CI ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å…±æœ‰ã§ãã‚‹ã‚ˆã†ã«ãªã‚Œã°ã€CI ã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒåŠ‡çš„ã«çŸ­ç¸®ã•ã‚Œã‚‹ã¯ãšã§ã™ã€‚

ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã‚’å°Žå…¥ã—ãŸã ã‘ã§ã€ç‰¹ã«ãƒ“ãƒ«ãƒ‰ã®ç¹°ã‚Šè¿”ã—ã«ã‹ã‹ã‚‹æ™‚é–“ãŒå¤§å¹…ã«çŸ­ç¸®ã•ã‚Œã¾ã—ãŸã€‚


## å®Ÿéš›ã®ã‚³ãƒžãƒ³ãƒ‰ä¾‹
-ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãƒ“ãƒ«ãƒ‰

```
pnpm run build:all
```
â†’ turbo.json ã®è¨­å®šã«å¾“ã£ã¦ã€ä¾å­˜è§£æ±ºï¼‹ä¸¦åˆ—å®Ÿè¡ŒãŒèµ°ã‚Šã¾ã™ã€‚

- ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘å®Ÿè¡Œ

```
pnpm --filter @frommiddle/web build
```

## æŒ¯ã‚Šè¿”ã‚Š
æœ€åˆã¯ã€Œã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã£ã¦ãªãã¦ã‚‚ã„ã„ã®ã§ã¯ï¼Ÿã€ã¨æ€ã£ã¦ã„ã¾ã—ãŸã€‚
ã—ã‹ã—ã€ãƒ¢ãƒŽãƒ¬ãƒã®ã‚ˆã†ã«è¤‡æ•°ã‚¢ãƒ—ãƒªãƒ»è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç®¡ç†ã™ã‚‹ã¨ã€**ã€Œã©ã®ã‚¿ã‚¹ã‚¯ã‚’ã„ã¤å®Ÿè¡Œã™ã¹ãã‹ã€**ã‚’æ˜Žç¢ºã«å®šç¾©ã—ãªã„ã¨ã™ãã«ç ´ç¶»ã—ã¾ã™ã€‚

Turborepo ã‚’å…¥ã‚Œã¦ã¿ãŸçµæžœã€ä¾å­˜é–¢ä¿‚ã‚’æ„è­˜ã›ãšã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã‚‹å®‰å¿ƒæ„Ÿ

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹å¤§å¹…ãªæ™‚é–“çŸ­ç¸®ãƒ­ãƒ¼ã‚«ãƒ«ã¨ CI/CD ã®ä¸€è²«æ€§ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆã‚’ä½“æ„Ÿã§ãã¾ã—ãŸã€‚

ã€Œã¾ãšã¯ build ã¨ lint ã¨ test ã‚’å®šç¾©ã™ã‚‹ã€ç¨‹åº¦ã§ã‚‚ååˆ†ã«åŠ¹æžœãŒã‚ã‚‹ã®ã§ã€åˆå¿ƒè€…ãŒæœ€åˆå°Žå…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã‚‚ãŠã™ã™ã‚ã§ãã¾ã™ã€‚

# ã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆï¼ˆç¾çŠ¶ï¼‰

ãƒ¢ãƒŽãƒ¬ãƒã®ä¸­ã§æ‰±ã†ã‚¤ãƒ³ãƒ•ãƒ©ã¯ã€ã¾ã å¤§è¦æ¨¡ãªã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚  
ç¾æ™‚ç‚¹ã§ã¯ã€Œç’°å¢ƒã”ã¨ã« S3 ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã—ã€ã‚¢ãƒ—ãƒªã®æˆæžœç‰©ã‚’é…ç½®ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ã¨ã„ã†æœ€å°é™ã®ä»•çµ„ã¿ã«ã¨ã©ã¾ã£ã¦ã„ã¾ã™ã€‚  

---

## ç’°å¢ƒã”ã¨ã® S3 ãƒã‚±ãƒƒãƒˆä½œæˆ
S3 ãƒã‚±ãƒƒãƒˆã¯ **é–‹ç™ºç’°å¢ƒï¼ˆdevï¼‰** ã¨ **æœ¬ç•ªç’°å¢ƒï¼ˆprodï¼‰** ã«åˆ†ã‘ã¦ç”¨æ„ã—ã¾ã—ãŸã€‚  
ã‚¹ãƒ†ãƒ¼ã‚¸åã‚’æ˜Žç¤ºçš„ã«ä»˜ä¸Žã™ã‚‹ã“ã¨ã§ã€ãƒªã‚½ãƒ¼ã‚¹ã®æ··åœ¨ã‚’é¿ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

ä¾‹:  
- `my-project-dev-bucket`  
- `my-project-prod-bucket`  

ã¾ã å˜ç´”ãªæ§‹æˆã§ã™ãŒã€ã“ã‚Œã ã‘ã§ã‚‚ã€Œç’°å¢ƒã‚’åˆ†ã‘ã¦å®‰å…¨ã«å‹•ã‹ã™ã€ç¬¬ä¸€æ­©ã«ãªã‚Šã¾ã™ã€‚

---

## ã‚¹ãƒ†ãƒ¼ã‚¸åˆ†é›¢ã®è€ƒãˆæ–¹
å½“åˆã¯ã™ã¹ã¦ã®ç’°å¢ƒã‚’ä¸€ã¤ã®ãƒã‚±ãƒƒãƒˆã«ã¾ã¨ã‚ã‚‹ã“ã¨ã‚‚è€ƒãˆã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰ dev ã¨ prod ã‚’åˆ†ã‘ã¾ã—ãŸã€‚  

- é–‹ç™ºä¸­ã®ã‚¢ãƒ—ãƒªã‚’èª¤ã£ã¦æœ¬ç•ªã«ä¸Šæ›¸ãã—ãªã„ã‚ˆã†ã«ã™ã‚‹  
- ãƒã‚±ãƒƒãƒˆãƒãƒªã‚·ãƒ¼ã‚„ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ç’°å¢ƒã”ã¨ã«æ˜Žç¢ºã«ã§ãã‚‹  
- å°†æ¥çš„ã« CI/CD ã‹ã‚‰è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹éš›ã«åˆ†ã‘ã¦ãŠã„ãŸæ–¹ãŒé‹ç”¨ã—ã‚„ã™ã„  

ã€Œã‚·ãƒ³ãƒ—ãƒ«ã§ã‚‚å®‰å…¨ã«ã€ã¨ã„ã†æ–¹é‡ã§ã€ã¾ãšã¯ dev/prod ã®2ç’°å¢ƒã‚’åŸºæœ¬ã¨ã—ã¾ã—ãŸã€‚

---

## ä»Šå¾Œã®æ‹¡å¼µä½™åœ°
ç¾çŠ¶ã¯ S3 ãƒã‚±ãƒƒãƒˆã®ä½œæˆã«ã¨ã©ã¾ã£ã¦ã„ã¾ã™ãŒã€å°†æ¥çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‹¡å¼µã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚  

- **AWS CDK ã«ã‚ˆã‚‹ IaC åŒ–**  
  â†’ S3 ãƒã‚±ãƒƒãƒˆã®å®šç¾©ã‚’ã‚³ãƒ¼ãƒ‰åŒ–ã—ã€ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ã‚‚çµ±åˆçš„ã«ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹  
- **Route 53 ã«ã‚ˆã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š**  
  â†’ é™çš„ã‚µã‚¤ãƒˆã‚’ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã§å…¬é–‹ã™ã‚‹  
- **API Gateway + Lambda**  
  â†’ API ã‚µãƒ¼ãƒãƒ¼ã‚’ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§æ§‹ç¯‰ã—ã€S3 ã§ãƒ›ã‚¹ãƒˆã™ã‚‹ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨é€£æºã™ã‚‹  
- **ç’°å¢ƒã”ã¨ã®æ˜Žç¤ºçš„ãªã‚¹ãƒ†ãƒ¼ã‚¸åä»˜ä¸Ž**  
  â†’ å°†æ¥ã¯ S3 ä»¥å¤–ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆDynamoDB, Cognito ãªã©ï¼‰ã«ã‚‚åŒã˜æ–¹é‡ã‚’é©ç”¨ã™ã‚‹  

---

## æŒ¯ã‚Šè¿”ã‚Š
åˆå¿ƒè€…ã¨ã—ã¦ã¯ã€Œã¾ãšã¯ S3 ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€ã“ã¨ã‹ã‚‰å§‹ã‚ã¾ã—ãŸã€‚  
ã¾ã  IaC ã‚‚å°Žå…¥é€”ä¸­ã§ã™ãŒã€ç’°å¢ƒã‚’åˆ†ã‘ã¦ S3 ãƒã‚±ãƒƒãƒˆã‚’æŒã¤ã ã‘ã§ã‚‚ **ã€Œé–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã‚’æ„è­˜ã—ãŸé‹ç”¨ã€**ã‚’ä½“é¨“ã§ãã¾ã™ã€‚  

ã“ã®å°ã•ãªä¸€æ­©ãŒã€å°†æ¥çš„ã« CDK ã‚„ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã¦æ‹¡å¼µã™ã‚‹åŸºç›¤ã«ãªã‚‹ã¨è€ƒãˆã¦ã„ã¾ã™ã€‚


## CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

ãƒ¢ãƒŽãƒ¬ãƒã‚’é€²ã‚ã‚‹ä¸­ã§ã€Œå‹•ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’ã©ã†å®‰å…¨ã«ç’°å¢ƒã¸åæ˜ ã™ã‚‹ã‹ã€ã¨ã„ã†èª²é¡Œã«ç›´é¢ã—ã¾ã—ãŸã€‚  
ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã§ãã¦ã‚‚ã€ãã‚Œã‚’æœ¬ç•ªã«æ‰‹ä½œæ¥­ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã—ã¾ã†ã¨ãƒ’ãƒ¥ãƒ¼ãƒžãƒ³ã‚¨ãƒ©ãƒ¼ã®æ¸©åºŠã«ãªã‚Šã¾ã™ã€‚  
ãã“ã§ GitHub Actions ã‚’ä½¿ã£ã¦ã€**è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãƒ»ãƒ“ãƒ«ãƒ‰ã—ã€ç’°å¢ƒã«å¿œã˜ã¦å®‰å…¨ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**ã‚’çµ„ã¿ã¾ã—ãŸã€‚

---

### å‰ææ¡ä»¶ãƒã‚§ãƒƒã‚¯ï¼ˆprereq ã‚¸ãƒ§ãƒ–ï¼‰

ã¾ãšæœ€åˆã«èµ°ã‚‹ã®ãŒ **å‰ææ¡ä»¶ã®ãƒã‚§ãƒƒã‚¯**ã§ã™ã€‚  
ã€Œãƒ‡ãƒ—ãƒ­ã‚¤ã«å¿…è¦ãªå¤‰æ•°ã‚„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿã€ã‚’æœ€åˆã«æ¤œæŸ»ã—ã€è¶³ã‚Šãªã„ã‚‚ã®ãŒã‚ã‚Œã°å¾Œç¶šã®å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚

- å…±é€šã§å¿…è¦ãªã‚‚ã®: `AWS_REGION`, `PROJECT`, `SERVICE`
- dev ç”¨: `AWS_DEV_OIDC_ROLE_ARN`
- prod ç”¨: `AWS_PROD_OIDC_ROLE_ARN`

ä¸è¶³ã—ã¦ã„ã‚‹ã‚‚ã®ã¯ `GITHUB_STEP_SUMMARY` ã«ä¸€è¦§ã§å‡ºåŠ›ã•ã‚Œã‚‹ã®ã§ã€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œç”»é¢ã‹ã‚‰ã™ãã«ç¢ºèªã§ãã¾ã™ã€‚  
ã“ã®ãŠã‹ã’ã§ã€Œè¨­å®šæ¼ã‚Œã«æ°—ã¥ã‹ãªã„ã¾ã¾ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹ã€ã¨ã„ã£ãŸç„¡é§„ã‚’é˜²ã’ã¾ã—ãŸã€‚

---

### ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¤å®šï¼ˆset-stage-variable ã‚¸ãƒ§ãƒ–ï¼‰

æ¬¡ã«ã€Œä»Šå›žã®å®Ÿè¡ŒãŒ dev / prod / preview ã®ã©ã‚Œãªã®ã‹ã€ã‚’åˆ¤å®šã—ã¦ã„ã¾ã™ã€‚  
GitHub ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ push ã¨ PR ãƒžãƒ¼ã‚¸ã§å‚ç…§ã§ãã‚‹å¤‰æ•°ãŒé•ã†ãŸã‚ã€**ã‚¤ãƒ™ãƒ³ãƒˆã”ã¨ã«åˆ¤å®šæ–¹æ³•ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å·¥å¤«**ã‚’ã—ã¦ã„ã¾ã™ã€‚

- PR ãƒžãƒ¼ã‚¸æ™‚ â†’ `base_ref`ï¼ˆãƒžãƒ¼ã‚¸å…ˆãƒ–ãƒ©ãƒ³ãƒï¼‰ã‚’åˆ©ç”¨
- push æ™‚ â†’ `ref` ã‚’åˆ©ç”¨

ã“ã‚Œã«ã‚ˆã£ã¦ã€ãƒžãƒ¼ã‚¸ã‚„ push ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§èª¤ã£ã¦ç’°å¢ƒã‚’åˆ¤å®šã—ã¦ã—ã¾ã†äº‹æ•…ã‚’é˜²ã„ã§ã„ã¾ã™ã€‚  
åˆ¤å®šçµæžœã¯ `stage` ã¨ã„ã†å‡ºåŠ›ã«ã¾ã¨ã‚ã‚‰ã‚Œã€å¾Œç¶šã‚¸ãƒ§ãƒ–ãŒå…±é€šã§åˆ©ç”¨ã§ãã¾ã™ã€‚

---

### ãƒ“ãƒ«ãƒ‰ï¼ˆbuild ã‚¸ãƒ§ãƒ–ï¼‰

ãƒ‡ãƒ—ãƒ­ã‚¤ã®å‰ã«ã¯å¿…ãšå…¨ä½“ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  
ã“ã“ã§é‡è¦ãªã®ã¯ **ã€Œä¸€åº¦ã ã‘ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã€** ã¨ã„ã†ç‚¹ã§ã™ã€‚  

ä»¥å‰ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãŸã³ã«å†ãƒ“ãƒ«ãƒ‰ã—ã¦ã„ãŸã®ã§ã™ãŒã€æ™‚é–“ã‚‚ã‹ã‹ã‚‹ã—ã€ãƒ“ãƒ«ãƒ‰çµæžœãŒç’°å¢ƒã«ã‚ˆã£ã¦ã‚ºãƒ¬ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚  
ç¾åœ¨ã¯å…±é€šã® `build:all` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ãƒ¢ãƒŽãƒ¬ãƒå…¨ä½“ã‚’ãƒ“ãƒ«ãƒ‰ã—ã€ãã®æˆæžœç‰©ã‚’ dev/prod ãƒ‡ãƒ—ãƒ­ã‚¤ã§ä½¿ã„å›žã™å½¢ã«ã—ã¦ã„ã¾ã™ã€‚  
ã“ã‚Œã«ã‚ˆã£ã¦ã€**ã€ŒåŒã˜ã‚‚ã®ãŒ dev ã§ã‚‚ prod ã§ã‚‚å‹•ãã€** ã¨ã„ã†å®‰å¿ƒæ„ŸãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚

---

### ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆdeploy-dev / deploy-prod ã‚¸ãƒ§ãƒ–ï¼‰

ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ PR ãŒãƒžãƒ¼ã‚¸ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã ã‘å‹•ãã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚  
ã—ã‹ã‚‚ **å‰ææ¡ä»¶ãŒæº€ãŸã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿å®Ÿè¡Œ**ã•ã‚Œã‚‹ã®ã§ã€è¨­å®šä¸è¶³ã®ã¾ã¾é–“é•ã£ã¦æœ¬ç•ªã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

- dev ç’°å¢ƒ
  - `dev` ãƒ–ãƒ©ãƒ³ãƒã«ãƒžãƒ¼ã‚¸ã•ã‚ŒãŸ PR ã®ã¿
  - `AWS_DEV_OIDC_ROLE_ARN` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿
- prod ç’°å¢ƒ
  - `main` ãƒ–ãƒ©ãƒ³ãƒã«ãƒžãƒ¼ã‚¸ã•ã‚ŒãŸ PR ã®ã¿
  - `AWS_PROD_OIDC_ROLE_ARN` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿

AWS ã¸ã®èªè¨¼ã«ã¯ **OIDC** ã‚’ä½¿ã£ã¦ãŠã‚Šã€é•·æœŸã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚’ Secrets ã«ç½®ã‹ãªãã¦ã‚‚ã‚ˆããªã‚Šã¾ã—ãŸã€‚  
CDK ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã«ã¯ `--context stage/project/service` ã‚’æ¸¡ã—ã¦ãŠã‚Šã€ç’°å¢ƒã‚„ã‚µãƒ¼ãƒ“ã‚¹åã”ã¨ã«å‘½åè¦å‰‡ã‚’è‡ªå‹•ã§é©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

---

### ã‚¿ã‚°ä»˜ã‘ï¼ˆtag-on-main ã‚¸ãƒ§ãƒ–ï¼‰

æœ€å¾Œã«ã€æœ¬ç•ª (`main`) ã«ãƒžãƒ¼ã‚¸ã•ã‚ŒãŸã¨ãã ã‘è‡ªå‹•ã§ Git ã‚¿ã‚°ã‚’æ‰“ã¤å‡¦ç†ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚  
ã‚¿ã‚°ã¯ SemVer ã®ãƒ‘ãƒƒãƒç•ªå·ã‚’è‡ªå‹•ã§ä¸Šã’ã‚‹ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã§ã€Œã©ã®ã‚³ãƒŸãƒƒãƒˆãŒã©ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ã€ã‚’è¿½ã„ã‚„ã™ããªã‚Šã¾ã™ã€‚  

æœ€åˆã¯ã‚¿ã‚°ã‚’æ‰‹å‹•ã§æ‰“ã£ã¦ã„ã¾ã—ãŸãŒã€å¿˜ã‚ŒãŸã‚Šä½œæ³•ãŒãƒãƒ©ãƒãƒ©ã«ãªã£ãŸã‚Šã—ã¦ã„ãŸã®ã§ã€è‡ªå‹•åŒ–ã—ã¦ã‹ã‚‰ã¯å±¥æ­´ãŒã¨ã¦ã‚‚ç¶ºéº—ã«ãªã‚Šã¾ã—ãŸã€‚

---

### ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ‹ãƒšãƒƒãƒˆ

AWSå´ã®ãƒ­ãƒ¼ãƒ«ã‚„OIDCã®è¨­å®šã¯åˆ¥é€”å®Ÿæ–½ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ãŠãŠã‚€ã­GitHub Actionsã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã§ã™ã€‚ã“ã®é–‹ç™ºã‚’ã—ã¦ã„ã‚‹æ™‚ã«ã€ä¸‹è¨˜ã‚’èª¿æ•´ã™ã‚‹ã®ãŒä¸€ç•ªæ¥½ã—ã‹ã£ãŸã§ã™ã€‚

```
name: CI Workflow

on:
  push:
    branches:
      - 'feature/**'
  pull_request:
    types: [closed]
    branches: [main, dev]

jobs:
  prereq:
    runs-on: ubuntu-latest
    outputs:
      dev_configured: ${{ steps.check.outputs.dev_configured }}
      prod_configured: ${{ steps.check.outputs.prod_configured }}
      missing_dev: ${{ steps.check.outputs.missing_dev }}
      missing_prod: ${{ steps.check.outputs.missing_prod }}
    steps:
      - id: check
        run: |
          missing_common=()
          [[ -z "${{ vars.AWS_REGION }}" ]] && missing_common+=(AWS_REGION)
          [[ -z "${{ vars.PROJECT }}"   ]] && missing_common+=(PROJECT)
          [[ -z "${{ vars.SERVICE }}"   ]] && missing_common+=(SERVICE)

          missing_dev=("${missing_common[@]}")
          [[ -z "${{ secrets.AWS_DEV_OIDC_ROLE_ARN }}" ]] && missing_dev+=(AWS_DEV_OIDC_ROLE_ARN)
          if (( ${#missing_dev[@]} )); then
            echo "dev_configured=false" >> $GITHUB_OUTPUT
            printf "missing_dev=%s\n" "${missing_dev[*]}" >> $GITHUB_OUTPUT
          else
            echo "dev_configured=true" >> $GITHUB_OUTPUT
            echo "missing_dev=" >> $GITHUB_OUTPUT
          fi

          missing_prod=("${missing_common[@]}")
          [[ -z "${{ secrets.AWS_PROD_OIDC_ROLE_ARN }}" ]] && missing_prod+=(AWS_PROD_OIDC_ROLE_ARN)
          if (( ${#missing_prod[@]} )); then
            echo "prod_configured=false" >> $GITHUB_OUTPUT
            printf "missing_prod=%s\n" "${missing_prod[*]}" >> $GITHUB_OUTPUT
          else
            echo "prod_configured=true" >> $GITHUB_OUTPUT
            echo "missing_prod=" >> $GITHUB_OUTPUT
          fi

  set-stage-variable:
    needs: prereq
    if: >
      github.event_name == 'push' ||
      (github.event_name == 'pull_request' && github.event.pull_request.merged == true)
    runs-on: ubuntu-latest
    outputs:
      stage: ${{ steps.stage.outputs.stage }}
    steps:
      - uses: actions/checkout@v4
      - id: stage
        run: |
          if [[ "${{ github.event_name }}" == "pull_request" && "${{ github.pull_request.merged }}" == "true" ]]; then
            if [[ "${{ github.base_ref }}" == "main" ]]; then stage="prod"
            elif [[ "${{ github.base_ref }}" == "dev" ]]; then stage="dev"
            else stage="preview"; fi
          else
            if [[ "${{ github.ref }}" == "refs/heads/main" ]]; then stage="prod"
            elif [[ "${{ github.ref }}" == "refs/heads/dev" ]]; then stage="dev"
            else stage="preview"; fi
          fi
          echo "STAGE=$stage" >> $GITHUB_ENV
          echo "stage=$stage" >> $GITHUB_OUTPUT

  build:
    needs: set-stage-variable
    runs-on: ubuntu-latest
    env:
      STAGE: ${{ needs.set-stage-variable.outputs.stage }}
      PROJECT: ${{ vars.PROJECT }}
      SERVICE: ${{ vars.SERVICE }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '22' }
      - run: npm i -g pnpm
      - run: pnpm install
      - run: pnpm run build:all

  deploy-dev:
    needs: [prereq, set-stage-variable, build]
    if: >
      needs.set-stage-variable.outputs.stage == 'dev' &&
      github.event_name == 'pull_request' &&
      github.event.pull_request.merged == true &&
      needs.prereq.outputs.dev_configured == 'true'
    runs-on: ubuntu-latest
    permissions: { id-token: write, contents: read }
    env:
      AWS_REGION: ${{ vars.AWS_REGION }}
      STAGE: dev
      PROJECT: ${{ vars.PROJECT }}
      SERVICE: ${{ vars.SERVICE }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '22' }
      - run: npm i -g pnpm
      - run: pnpm install
      - uses: aws-actions/configure-aws-credentials@v4
        with:
          role-to-assume: ${{ secrets.AWS_DEV_OIDC_ROLE_ARN }} # arn:aws:iam::<ACCOUNT_ID>:role/<ROLE_NAME>
          aws-region: ${{ env.AWS_REGION }}
      - name: CDK deploy (dev)
        working-directory: packages/infra
        run: |
          pnpm install
          pnpm cdk deploy --require-approval never \
            --context stage=${{ env.STAGE }} \
            --context project=${{ env.PROJECT }} \
            --context service=${{ env.SERVICE }}

  deploy-prod:
    needs: [prereq, set-stage-variable, build]
    if: >
      needs.set-stage-variable.outputs.stage == 'prod' &&
      github.event_name == 'pull_request' &&
      github.event.pull_request.merged == true &&
      needs.prereq.outputs.prod_configured == 'true'
    runs-on: ubuntu-latest
    permissions: { id-token: write, contents: read }
    env:
      AWS_REGION: ${{ vars.AWS_REGION }}
      STAGE: prod
      PROJECT: ${{ vars.PROJECT }}
      SERVICE: ${{ vars.SERVICE }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: '22' }
      - run: npm i -g pnpm
      - run: pnpm install
      - uses: aws-actions/configure-aws-credentials@v4
        with:
          role-to-assume: ${{ secrets.AWS_PROD_OIDC_ROLE_ARN }} # arn:aws:iam::<ACCOUNT_ID>:role/<ROLE_NAME>
          aws-region: ${{ env.AWS_REGION }}
      - name: CDK deploy (prod)
        working-directory: packages/infra
        run: |
          pnpm install
          pnpm -w run build:all
          pnpm cdk deploy --require-approval never \
            --context stage=${{ env.STAGE }} \
            --context project=${{ env.PROJECT }} \
            --context service=${{ env.SERVICE }}

  tag-on-main:
    needs: deploy-prod
    if: github.base_ref == 'main' && github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    permissions: { contents: write }
    steps:
      - uses: actions/checkout@v4
      - id: get_tag
        run: |
          git fetch --tags
          latest=$(git tag --sort=-v:refname | head -n 1)
          echo "latest_tag=$latest" >> $GITHUB_OUTPUT
      - name: Create new tag
        run: |
          latest=${{ steps.get_tag.outputs.latest_tag }}
          if [[ -z "$latest" ]]; then new_tag="v0.1.0"
          else IFS='.' read -r M m p <<< "${latest#v}"; p=$((p+1)); new_tag="v$M.$m.$p"; fi
          git config user.name "github-actions"
          git config user.email "github-actions@github.com"
          git tag "$new_tag"
          git push origin "$new_tag"

```

### æŒ¯ã‚Šè¿”ã‚Š

ã“ã†ã—ã¦ CI/CD ã‚’æ•´ãˆã¦ã¿ã¦å®Ÿæ„Ÿã—ãŸã®ã¯ã€**ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«ã‚’å…ˆã«ç½®ã„ã¦ãŠãå¤§åˆ‡ã•**ã§ã™ã€‚  

- å‰ææ¡ä»¶ãŒæƒã£ã¦ã„ãªã‘ã‚Œã°ãã‚‚ãã‚‚ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãªã„  
- ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¤å®šã‚’åŽ³å¯†ã«ã—ã¦èª¤ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é˜²ã  
- ãƒ“ãƒ«ãƒ‰ã‚’ä¸€åº¦ã«ã¾ã¨ã‚ã¦ä¸€è²«æ€§ã‚’æ‹…ä¿ã™ã‚‹  
- OIDC ã§èªè¨¼ã‚’å®‰å…¨ã«ã™ã‚‹  
- ã‚¿ã‚°ä»˜ã‘ã§å±¥æ­´ã‚’ãã¡ã‚“ã¨æ®‹ã™  

æœ€åˆã¯ã€ŒãŸã ãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚Œã°ã„ã„ã€ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€ã“ã†ã—ã¦å·¥å¤«ã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ã§ã€å®‰å¿ƒã—ã¦é–‹ç™ºã§ãã‚‹åœŸå°ãŒã§ãã¦ãã¾ã—ãŸã€‚  
ä»Šå¾Œã¯ Turborepo ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚„ã€ã‚ˆã‚Šé«˜åº¦ãªãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥ã‚’çµ„ã¿åˆã‚ã›ã¦ã€ã•ã‚‰ã«åŠ¹çŽ‡çš„ãªãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã—ã¦ã„ãäºˆå®šã§ã™ã€‚


# ã‚³ãƒ¼ãƒ‰å“è³ªã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

ãƒ¢ãƒŽãƒ¬ãƒã‚’é€²ã‚ã‚‹ã†ãˆã§ã€Œã‚³ãƒ¼ãƒ‰ã‚’ã©ã†ãã‚Œã„ã«ä¿ã¤ã‹ã€ã€Œç§˜å¯†æƒ…å ±ã‚’ã©ã†å®ˆã‚‹ã‹ã€ã¨ã„ã†èª²é¡Œã«ç›´é¢ã—ã¾ã—ãŸã€‚  
æœ€åˆã¯å‹•ã‘ã°ã‚ˆã„ã¨è€ƒãˆã¦ã„ã¾ã—ãŸãŒã€è¦æ¨¡ãŒå°‘ã—ãšã¤å¤§ãããªã‚‹ã«ã¤ã‚Œã¦ **ã€Œã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æ¯Žå›žåŒã˜æŒ‡æ‘˜ãŒå‡ºã‚‹ã€ã€Œèª¤ã£ã¦ã‚­ãƒ¼ã‚’ã‚³ãƒŸãƒƒãƒˆã—ãã†ã«ãªã‚‹ã€** ã¨ã„ã†ä¸å®‰ãŒå¼·ããªã£ã¦ãã¾ã—ãŸã€‚  

ãã“ã§ã€**ã‚³ãƒ¼ãƒ‰å“è³ªã‚’è‡ªå‹•ã§æ‹…ä¿ã™ã‚‹ä»•çµ„ã¿**ã¨**ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å¼·åŒ–ã™ã‚‹ä»•çµ„ã¿**ã‚’ãƒ¢ãƒŽãƒ¬ãƒã«çµ„ã¿è¾¼ã¿ã¾ã—ãŸã€‚

---

## Lint ã¨ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã®å°Žå…¥

ã¾ãšç€æ‰‹ã—ãŸã®ã¯ **Lint** ã¨ **ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆ**ã§ã™ã€‚  
ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã«ã‚¹ã‚¿ã‚¤ãƒ«ã®é•ã„ã§è­°è«–ã™ã‚‹ã®ã¯æ™‚é–“ã®ç„¡é§„ã ã¨æ„Ÿã˜ã¦ã„ãŸã®ã§ã€è‡ªå‹•ã§æƒãˆã¦ã—ã¾ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚

- **ESLint**  
  - JavaScript/TypeScript ã®é™çš„è§£æžã‚’è¡Œã„ã€æ½œåœ¨çš„ãªãƒã‚°ã‚’é˜²æ­¢ã€‚  
  - TypeScript ã‚µãƒãƒ¼ãƒˆã‚’æœ‰åŠ¹ã«ã—ã¦åž‹å®‰å…¨æ€§ã‚’é«˜ã‚ã¾ã—ãŸã€‚  

- **Prettier**  
  - ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒžãƒƒã‚¿ã€‚ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‚„ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã©ã‚’è‡ªå‹•æ•´å½¢ã€‚  
  - ã€Œèª°ãŒæ›¸ã„ã¦ã‚‚åŒã˜å½¢ã€ã«ãªã‚‹ã“ã¨ã§ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã®ä¸è¦ãªå·®åˆ†ãŒæ¿€æ¸›ã—ã¾ã—ãŸã€‚  

- **Markdownlint**  
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã‚³ãƒ¼ãƒ‰ã¨åŒã˜ã‚ˆã†ã«å“è³ªã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«å°Žå…¥ã€‚  
  - è¨˜äº‹ã‚„ README ã‚’æ›¸ãã¨ãã®ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã‚’çµ±ä¸€ã§ãã‚‹ã®ã§ã€å¾Œã‹ã‚‰èª­ã¿ã‚„ã™ã„çŠ¶æ…‹ã‚’ä¿ã¦ã¾ã™ã€‚  

çµæžœã¨ã—ã¦ã€**Lint ã¨ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆã‚’ CI ã‚„ Git Hook ã«çµ„ã¿è¾¼ã‚€**ã“ã¨ã§ã€ã‚³ãƒŸãƒƒãƒˆæ™‚ç‚¹ã§å•é¡Œã‚’è‡ªå‹•æ¤œå‡ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

---

## Git Hooks ã¨ Husky

è‡ªå‹•åŒ–ã®æµã‚Œã‚’ã•ã‚‰ã«å¼·åŒ–ã™ã‚‹ãŸã‚ã« **Husky** ã‚’å°Žå…¥ã—ã¾ã—ãŸã€‚  

- **pre-commit ãƒ•ãƒƒã‚¯**  
  - `eslint` / `prettier --check` / `markdownlint` ã‚’å®Ÿè¡Œ  
  - å•é¡ŒãŒã‚ã‚‹ã¨ã‚³ãƒŸãƒƒãƒˆè‡ªä½“ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ä»•çµ„ã¿  

- **pre-push ãƒ•ãƒƒã‚¯**  
  - `pnpm test` ã‚’å®Ÿè¡Œã—ã€æœ€ä½Žé™ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‰ãªã‘ã‚Œã°ãƒªãƒ¢ãƒ¼ãƒˆã« push ã§ããªã„ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  

æœ€åˆã¯ã€Œãƒ•ãƒƒã‚¯ã«æ™‚é–“ãŒã‹ã‹ã£ã¦é¢å€’ã‹ãªï¼Ÿã€ã¨æ€ã„ã¾ã—ãŸãŒã€æ…£ã‚Œã‚‹ã¨ **ã€Œå£Šã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚‰ãªã„å®‰å¿ƒæ„Ÿã€** ã®æ–¹ãŒå¤§ãããªã‚Šã¾ã—ãŸã€‚

---

## ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡ºï¼ˆGitleaksï¼‰

ã‚‚ã†ä¸€ã¤é‡è¦ã ã£ãŸã®ãŒ **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®èª¤ã‚³ãƒŸãƒƒãƒˆé˜²æ­¢**ã§ã™ã€‚  
AWS ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ã‚„ API ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã†ã£ã‹ã‚Šã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã†ã¨ã€å…¬é–‹ãƒªãƒã‚¸ãƒˆãƒªãªã‚‰å³ã‚¢ã‚¦ãƒˆã§ã™ã—ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã§ã‚‚æ¼æ´©ãƒªã‚¹ã‚¯ã«ãªã‚Šã¾ã™ã€‚  

ãã“ã§å°Žå…¥ã—ãŸã®ãŒ **Gitleaks** ã§ã™ã€‚  

- **pre-commit ãƒ•ãƒƒã‚¯ã«çµ„ã¿è¾¼ã¿**  
  â†’ ã‚³ãƒŸãƒƒãƒˆå‰ã«è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³ã—ã€ã‚‚ã—ã‚­ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ã‚Œã°å³ãƒ–ãƒ­ãƒƒã‚¯ã€‚  
- **CI ã§ã‚‚å®Ÿè¡Œ**  
  â†’ ä¸‡ãŒä¸€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ãƒƒã‚¯ã‚’ bypass ã—ã¦ã‚‚ã€PR æ™‚ã«æ¤œå‡ºã§ãã‚‹äºŒé‡ãƒã‚§ãƒƒã‚¯ä½“åˆ¶ã€‚  

æœ€åˆã«è¨­å®šã—ãŸã¨ãã¯ã€Œèª¤æ¤œçŸ¥ï¼ˆfalse positiveï¼‰ã€ã«æ‚©ã¾ã•ã‚Œã¾ã—ãŸãŒã€`.gitleaks.toml` ã‚’èª¿æ•´ã—ã¦ä¸è¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é™¤å¤–ã™ã‚‹ã“ã¨ã§è½ã¡ç€ãã¾ã—ãŸã€‚  

---

## CI ã¨ã®çµ±åˆ

ã“ã‚Œã‚‰ã®ãƒã‚§ãƒƒã‚¯ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã ã‘ã§ã¯ãªãã€GitHub Actions ã® CI ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã‚‚çµ±åˆã—ã¾ã—ãŸã€‚  

- `lint:all` â†’ ESLint, Prettier, Markdownlint ã‚’ä¸€æ‹¬å®Ÿè¡Œ  
- `gitleaks` â†’ ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¹ã‚­ãƒ£ãƒ³ã‚’ CI ä¸Šã§ã‚‚å®Ÿæ–½  

ã“ã†ã—ã¦ãŠãã“ã¨ã§ **ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã§é€ƒã—ã¦ã‚‚ CI ã§å¿…ãšæ­¢ã¾ã‚‹ã€** ä»•çµ„ã¿ã«ãªã‚Šã€å®‰å¿ƒã—ã¦é–‹ç™ºã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

---

## æŒ¯ã‚Šè¿”ã‚Š

æœ€åˆã¯ **ã€Œã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ãªã‚“ã¦å¾Œã§ç›´ã›ã°ã„ã„ã€ã€Œç§˜å¯†æƒ…å ±ã¯æ°—ã‚’ã¤ã‘ã‚Œã°å¤§ä¸ˆå¤«ã€** ã¨è€ƒãˆã¦ã„ã¾ã—ãŸã€‚  
ã—ã‹ã—å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒé€²ã‚€ã¨ã€ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¸çµ±ä¸€ã‚„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¼æ´©ãƒªã‚¹ã‚¯ã¯å¤§ããªè² æ‹…ã«ãªã£ã¦ãã¾ã™ã€‚  

- Lint ã¨ãƒ•ã‚©ãƒ¼ãƒžãƒƒã‚¿ã§ã€Œäººé–“ãŒæŒ‡æ‘˜ã—ãªãã¦ã‚‚æ¸ˆã‚€ç’°å¢ƒã€ã‚’æ•´ãˆã‚‹  
- Husky ã§ã€Œå£Šã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚„æ¼æ´©ãƒªã‚¹ã‚¯ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã•ã›ãªã„ã€  
- Gitleaks ã§ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æœ€å¾Œã®ç ¦ã‚’ç”¨æ„ã™ã‚‹ã€  

ã“ã†ã—ãŸä»•çµ„ã¿ã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰å“è³ªã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’è‡ªå‹•ã§æ‹…ä¿ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚  
çµæžœã¨ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã€Œè¨­è¨ˆã‚„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®æœ¬è³ªçš„ãªè­°è«–ã€ã«é›†ä¸­ã§ãã€é–‹ç™ºä½“é¨“ãŒæ ¼æ®µã«è‰¯ããªã£ãŸã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚


# é–‹ç™ºä½“é¨“ï¼ˆDXï¼‰è¨­è¨ˆ

ãƒ¢ãƒŽãƒ¬ãƒã‚’å§‹ã‚ã¦ã—ã°ã‚‰ãã™ã‚‹ã¨ã€ä»Šåº¦ã¯ **ã€Œã©ã†ã‚„ã£ãŸã‚‰ã‚‚ã£ã¨å¿«é©ã«é–‹ç™ºã§ãã‚‹ã‹ã€** ã¨ã„ã†èª²é¡ŒãŒå‡ºã¦ãã¾ã—ãŸã€‚  
ã›ã£ã‹ã CI/CD ã‚„å“è³ªãƒã‚§ãƒƒã‚¯ã‚’æ•´ãˆã¦ã‚‚ã€æ—¥ã€…ã®é–‹ç™ºãŒã‚¹ãƒˆãƒ¬ã‚¹ãƒ•ãƒ«ã ã¨ç¶šãã¾ã›ã‚“ã€‚  
ãã“ã§æ„è­˜ã—ãŸã®ãŒ **DX (Developer Experience)** â€• é–‹ç™ºè€…ä½“é¨“ã‚’å‘ä¸Šã•ã›ã‚‹ä»•çµ„ã¿ã¥ãã‚Šã§ã™ã€‚

---

## DevContainer ã«ã‚ˆã‚‹ç’°å¢ƒçµ±ä¸€

æœ€åˆã«å–ã‚Šçµ„ã‚“ã ã®ã¯ **ç’°å¢ƒã®çµ±ä¸€**ã§ã—ãŸã€‚  
ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ç›´æŽ¥ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€OS ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é•ã„ã§å‹•ä½œãŒå¤‰ã‚ã‚‹å•é¡ŒãŒèµ·ãã‚„ã™ããªã‚Šã¾ã™ã€‚  

- **DevContainer** ã‚’å°Žå…¥ã—ã€Node.js / AWS CLI / pnpm / CDK ãªã©ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã¾ã¨ã‚ã¾ã—ãŸã€‚  
- VS Code ã® Remote Container æ©Ÿèƒ½ã‚’ä½¿ãˆã°ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã„ãŸçž¬é–“ã«åŒã˜ç’°å¢ƒã§ä½œæ¥­é–‹å§‹ã§ãã¾ã™ã€‚  
- CI ç’°å¢ƒã§ã‚‚ã»ã¼åŒã˜ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã§ãã‚‹ãŸã‚ã€**ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å‹•ã„ãŸã®ã« CI ã§è½ã¡ã‚‹ã€**å•é¡Œã‚’å¤§å¹…ã«æ¸›ã‚‰ã›ã¾ã—ãŸã€‚  

ã“ã‚Œã«ã‚ˆã£ã¦ã€Œç’°å¢ƒæ§‹ç¯‰ã®ã¤ã¾ãšãã€ãŒãªããªã‚Šã€èª°ã§ã‚‚ã™ãã«é–‹ç™ºã«å‚åŠ ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

---

## ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨ CI ã®ä¸€è²«æ€§

DX ã‚’è€ƒãˆã‚‹ä¸Šã§æ„è­˜ã—ãŸã®ã¯ **ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã¨ CI ã®ä½“é¨“ã‚’æƒãˆã‚‹ã€**ã“ã¨ã§ã™ã€‚  

- ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã¯ã™ã¹ã¦ **pnpm scripts** ã«å¯„ã›ã‚‹  
- CI ã§ã‚‚ `pnpm run lint:all`, `pnpm run test`, `pnpm run build:all` ã‚’ãã®ã¾ã¾åˆ©ç”¨  
- Turborepo ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­è¨ˆã‚’ä½¿ã£ã¦ã€ä¾å­˜é–¢ä¿‚ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚çµ±ä¸€  

ã“ã†ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºè€…ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§å©ãã‚³ãƒžãƒ³ãƒ‰ã¨ã€CI ãŒå®Ÿè¡Œã™ã‚‹ã‚³ãƒžãƒ³ãƒ‰ãŒä¸€è‡´ã—ã€**ã€ŒCI å°‚ç”¨ã®ã‚ˆãã‚ã‹ã‚‰ãªã„ã‚³ãƒžãƒ³ãƒ‰ã€**ã‚’è¦šãˆã‚‹å¿…è¦ãŒãªããªã‚Šã¾ã—ãŸã€‚

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆJest / Vitest / React Testing Libraryï¼‰

ãƒ†ã‚¹ãƒˆã¯æœ€åˆã»ã¨ã‚“ã©æ›¸ã‘ã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚  
ã—ã‹ã—è¦æ¨¡ãŒå¤§ãããªã‚‹ã¨ã€Œå®‰å¿ƒã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§ããªã„ã€çŠ¶æ…‹ãŒè¾›ããªã‚Šã€å¾ã€…ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãè¶³ã—ã¦ã„ãã¾ã—ãŸã€‚

- **Jest**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®ãƒ†ã‚¹ãƒˆã«åˆ©ç”¨  
- **Vitest**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è»½é‡ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã«åˆ©ç”¨  
- **React Testing Library**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç¢ºèªã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ç›®ç·šã§è¨˜è¿°  

ã“ã‚Œã‚‰ã‚’ãƒ¢ãƒŽãƒ¬ãƒå…¨ä½“ã«çµ„ã¿è¾¼ã¿ã€`pnpm test` ã§ã¾ã¨ã‚ã¦å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  
ç‰¹ã« React Testing Library ã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã†ç”»é¢ã‚’æ“ä½œã™ã‚‹ã‹ã€ã«è¿‘ã„è¦–ç‚¹ã§æ›¸ã‘ã‚‹ã®ã§ã€ãƒã‚°ã®å†ç¾ã‚„å›žé¿ã«å½¹ç«‹ã£ã¦ã„ã¾ã™ã€‚

---

## ãƒ‡ãƒãƒƒã‚°ã¨ç›£è¦–ã®å·¥å¤«

é–‹ç™ºä¸­ã«ã€Œå•é¡ŒãŒèµ·ããŸã¨ãã«ç´ æ—©ãæ°—ã¥ã‘ã‚‹ã€ä»•çµ„ã¿ã‚‚ DX ã«ã¯æ¬ ã‹ã›ã¾ã›ã‚“ã€‚  

- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ã¯ `pnpm dev` ã§ãƒ•ãƒ­ãƒ³ãƒˆã¨ API ã‚’ä¸¦åˆ—èµ·å‹•ã—ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ã¾ã¨ã‚ã¦ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  
- Turborepo ã®ãƒ­ã‚°ã‚’æ´»ç”¨ã—ã¦ã€ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å¤±æ•—ã—ãŸã®ã‹ä¸€ç›®ã§ã‚ã‹ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚  
- CI ã§ã¯å¤±æ•—ã—ãŸã‚¹ãƒ†ãƒƒãƒ—ã‚’ GitHub Actions ã® UI ã§ç¢ºèªã§ãã‚‹ã®ã§ã€å•é¡Œã®åˆ‡ã‚Šåˆ†ã‘ãŒå®¹æ˜“ã«ãªã‚Šã¾ã—ãŸã€‚  

ã¾ã æœ¬æ ¼çš„ãªãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¾ã§ã¯ã§ãã¦ã„ã¾ã›ã‚“ãŒã€**ã€Œå¤±æ•—ã«æ—©ãæ°—ã¥ã‘ã‚‹ä»•çµ„ã¿ã€**ã‚’æŒã¤ã ã‘ã§å¿ƒç†çš„ãªå®‰å¿ƒæ„ŸãŒé•ã„ã¾ã™ã€‚

---

## æŒ¯ã‚Šè¿”ã‚Š

æœ€åˆã¯ **ã€Œã¨ã‚Šã‚ãˆãšã‚³ãƒ¼ãƒ‰ãŒå‹•ã‘ã°ã‚ˆã„ã€** ã¨ã„ã†çŠ¶æ…‹ã‹ã‚‰å§‹ã¾ã‚Šã¾ã—ãŸãŒã€DX ã‚’æ•´å‚™ã—ã¦ã„ãã†ã¡ã«æ¬¡ã®ã‚ˆã†ãªåŠ¹æžœãŒå‡ºã¾ã—ãŸã€‚  

- **DevContainer** ã§ç’°å¢ƒå·®ç•°ã‚’ãªãã—ã€æ–°è¦å‚åŠ è€…ã‚‚ã™ãé–‹ç™ºã§ãã‚‹  
- **ãƒ­ãƒ¼ã‚«ãƒ«ã¨ CI ã®ä¸€è²«æ€§**ã§ã€è¦šãˆã‚‹ã¹ãã‚³ãƒžãƒ³ãƒ‰ãŒæ¸›ã‚Šã€ãƒˆãƒ©ãƒ–ãƒ«ã‚‚å°‘ãªããªã£ãŸ  
- **ãƒ†ã‚¹ãƒˆå°Žå…¥**ã«ã‚ˆã‚Šå®‰å¿ƒã—ã¦ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ  
- **ãƒ‡ãƒãƒƒã‚°ãƒ»ç›£è¦–ã®å·¥å¤«**ã§å¤±æ•—ã«ã™ãæ°—ã¥ã‘ã‚‹ã‚ˆã†ã«ãªã£ãŸ  

DX ã‚’æ„è­˜ã™ã‚‹ã“ã¨ã§ã€Œé–‹ç™ºè€…ã¨ã—ã¦æ°—æŒã¡ã‚ˆãã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã‚‹ç’°å¢ƒã€ãŒæ•´ã„ã€ãƒ¢ãƒŽãƒ¬ãƒã‚’ç¶™ç¶šçš„ã«é‹ç”¨ã™ã‚‹åœŸå°ãŒå¼·ããªã£ãŸã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚


# ã¾ã¨ã‚ã¨ä»Šå¾Œã®å±•æœ›

## ç¾çŠ¶ã®åˆ°é”ç‚¹
ã“ã®ãƒ¢ãƒŽãƒ¬ãƒç’°å¢ƒã¯ã€æœ€åˆã¯ã€Œè¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚’ã²ã¨ã¤ã«ã¾ã¨ã‚ãŸã„ã€ã¨ã„ã†å°ã•ãªå‹•æ©Ÿã‹ã‚‰å§‹ã¾ã‚Šã¾ã—ãŸã€‚  
è©¦è¡ŒéŒ¯èª¤ã‚’ç¹°ã‚Šè¿”ã™ä¸­ã§ã€å°‘ã—ãšã¤æ¬¡ã®ã‚ˆã†ãªä»•çµ„ã¿ã‚’æ•´ãˆã¦ãã¾ã—ãŸã€‚

- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†**  
  â†’ `apps/` ã¨ `packages/` ã«åˆ†ã‘ã¦æ•´ç†ã€pnpm workspace ã§ä¾å­˜é–¢ä¿‚ã‚’ä¸€å…ƒç®¡ç†  

- **ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥**  
  â†’ Turborepo ã«ã‚ˆã‚Šãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆã‚’åŠ¹çŽ‡åŒ–ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§é–‹ç™ºä½“é¨“ã‚’æ”¹å–„  

- **ã‚¤ãƒ³ãƒ•ãƒ©è¨­è¨ˆï¼ˆç¾çŠ¶ï¼‰**  
  â†’ dev/prod ç”¨ã« S3 ãƒã‚±ãƒƒãƒˆã‚’åˆ†é›¢ã—ã€å®‰å…¨ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹åŸºç›¤ã‚’æ•´å‚™  

- **CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³**  
  â†’ GitHub Actions ã§å‰æãƒã‚§ãƒƒã‚¯ â†’ ã‚¹ãƒ†ãƒ¼ã‚¸åˆ¤å®š â†’ ãƒ“ãƒ«ãƒ‰ â†’ ãƒ‡ãƒ—ãƒ­ã‚¤ â†’ ã‚¿ã‚°ä»˜ã‘ã®æµã‚Œã‚’è‡ªå‹•åŒ–  

- **ã‚³ãƒ¼ãƒ‰å“è³ªã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**  
  â†’ ESLint / Prettier / Markdownlint / Husky / Gitleaks ã‚’çµ„ã¿è¾¼ã¿ã€å®‰å¿ƒã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒŸãƒƒãƒˆã§ãã‚‹ç’°å¢ƒã‚’å®Ÿç¾  

- **é–‹ç™ºä½“é¨“ï¼ˆDXï¼‰**  
  â†’ DevContainer ã«ã‚ˆã‚‹ç’°å¢ƒçµ±ä¸€ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®å°Žå…¥ã€ãƒ­ãƒ¼ã‚«ãƒ«ã¨ CI ã®ä¸€è²«æ€§ã‚’æ„è­˜ã—ãŸé–‹ç™ºåŸºç›¤ã‚’æ§‹ç¯‰  

ã€Œæœ€åˆã¯é›£ã—ãã†ã€ã¨æ€ã£ã¦ã„ãŸãƒ¢ãƒŽãƒ¬ãƒã§ã™ãŒã€å°‘ã—ãšã¤æ©Ÿèƒ½ã‚’ç©ã¿ä¸Šã’ã‚‹ã“ã¨ã§ã€ä»Šã§ã¯ **å®‰å¿ƒã—ã¦é–‹ç™ºã§ãã‚‹ç’°å¢ƒ** ãŒæ‰‹ã«å…¥ã£ãŸã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚

---

## ä»Šå¾Œè¿½åŠ ã‚’æ¤œè¨Žã—ã¦ã„ã‚‹æ©Ÿèƒ½
ç¾çŠ¶ã¯ã¾ã  â€œæœ€å°é™ã®åŸºç›¤â€ ã§ã™ã€‚ã“ã‚Œã‹ã‚‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‹¡å¼µã‚’æ¤œè¨Žã—ã¦ã„ã¾ã™ã€‚

- **ã‚¤ãƒ³ãƒ•ãƒ©ã®æœ¬æ ¼çš„ãª IaC åŒ–**  
  - AWS CDK ã§ S3 ä»¥å¤–ã®ãƒªã‚½ãƒ¼ã‚¹ï¼ˆAPI Gateway, Lambda, Route 53, DynamoDB ãªã©ï¼‰ã‚’çµ±åˆçš„ã«ç®¡ç†  
  - ã‚¹ãƒ†ãƒ¼ã‚¸åä»˜ä¸Žãƒãƒªã‚·ãƒ¼ã‚’å¾¹åº•ã—ã€ãƒªã‚½ãƒ¼ã‚¹è¡çªã‚’é˜²æ­¢  

- **ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å°Žå…¥**  
  - Turborepo ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ´»ç”¨ã—ã€CI/CD ã®ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’ã•ã‚‰ã«çŸ­ç¸®  

- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ã®é«˜åº¦åŒ–**  
  - Gitleaks ã«åŠ ãˆã¦ Trivy ã‚„ Dependabot ã‚’å°Žå…¥ã—ã€ä¾å­˜é–¢ä¿‚ã‚„ã‚³ãƒ³ãƒ†ãƒŠã®è„†å¼±æ€§ã«ã‚‚å¯¾å¿œ  

- **è‡ªå‹•ãƒªãƒªãƒ¼ã‚¹ãƒ•ãƒ­ãƒ¼**  
  - Git ã‚¿ã‚°ä»˜ã‘ã‚’èµ·ç‚¹ã«ã€è‡ªå‹•ã§ãƒªãƒªãƒ¼ã‚¹ãƒŽãƒ¼ãƒˆã‚’ç”Ÿæˆã™ã‚‹ä»•çµ„ã¿ã‚’è¿½åŠ   
  - ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã¨å¤‰æ›´å±¥æ­´ã‚’ã‚ˆã‚Šæ˜Žç¢ºã«ç®¡ç†  

- **é–‹ç™ºè€…å‘ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿ**  
  - æ–°ã—ãå‚åŠ ã—ãŸäººãŒè¿·ã‚ãªã„ã‚ˆã†ã€README ã‚„è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ•´å‚™  

---

## æ”¹å–„ã‚µã‚¤ã‚¯ãƒ«ã®å›žã—æ–¹
ãƒ¢ãƒŽãƒ¬ãƒã®è‰¯ã„ã¨ã“ã‚ã¯ã€Œå°ã•ãªæ”¹å–„ã‚’ã™ãå…¨ä½“ã«åæ˜ ã§ãã‚‹ã€ç‚¹ã§ã™ã€‚  
ãŸã¨ãˆã°ã€å‘½åãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å…±é€šåŒ–ã—ãŸã‚ˆã†ã«ã€å°ã•ãªå·¥å¤«ãŒå¾Œã‹ã‚‰åŠ¹ã„ã¦ãã¾ã™ã€‚  

ä»Šå¾Œã‚‚ **ã€Œå°ã•ãè©¦ã™ â†’ å…±é€šåŒ–ã™ã‚‹ â†’ è‡ªå‹•åŒ–ã™ã‚‹ã€** ã¨ã„ã†ã‚µã‚¤ã‚¯ãƒ«ã‚’å›žã—ãªãŒã‚‰ã€  
å°‘ã—ãšã¤é–‹ç™ºä½“é¨“ã¨é‹ç”¨åŸºç›¤ã‚’ç£¨ãä¸Šã’ã¦ã„ãäºˆå®šã§ã™ã€‚

---

## æœ€å¾Œã«
ã“ã®ãƒ¢ãƒŽãƒ¬ãƒã¯ã¾ã ç™ºå±•é€”ä¸Šã§ã™ãŒã€åˆå¿ƒè€…ãŒä¸€æ­©ãšã¤çµ„ã¿ä¸Šã’ã¦ã„ã£ãŸè¨˜éŒ²ãã®ã‚‚ã®ã§ã™ã€‚  
åŒã˜ã‚ˆã†ã«ã€Œãƒ¢ãƒŽãƒ¬ãƒã‚’å§‹ã‚ã¦ã¿ãŸã„ã‘ã‚Œã©é›£ã—ãã†ã€ã¨æ„Ÿã˜ã¦ã„ã‚‹æ–¹ã«ã€ã“ã®è¨˜äº‹ãŒå°‘ã—ã§ã‚‚å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚  
ãã—ã¦ã“ã‚Œã‹ã‚‰ã‚‚ã€ã‚ˆã‚Šå®Ÿè·µçš„ã§å¿«é©ãªãƒ¢ãƒŽãƒ¬ãƒé‹ç”¨ã‚’ç›®æŒ‡ã—ã¦æ”¹å–„ã‚’ç¶šã‘ã¦ã„ãã¾ã™ã€‚

