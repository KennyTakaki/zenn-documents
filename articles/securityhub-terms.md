---
title: "SecurityHubの用語"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# 概要

SecurityHub の集約に関して概要をまとめる

# 前提条件

AWS Security Hub は、サービスにリンクされた AWS Config ルールを使用して、ほとんどのコントロールのセキュリティチェックを実行します。

これらのコントロールをサポートするには、Security Hub が有効になっている各 AWS Region のすべてのアカウント（管理者アカウントとメンバーアカウントの両方）で AWS Config を有効にする必要があります。さらに、有効化された標準ごとに、有効化されたコントロールに必要なリソースを記録するように AWS Config を構成する必要があります。

Security Hub の標準を有効にする前に、AWS Config でリソースの記録をオンにすることをお勧めします。リソースの記録がオフになっているときに Security Hub がセキュリティチェックを実行しようとすると、チェックがエラーを返します。

Security Hub は AWS Config を管理しません。すでに AWS Config を有効にしている場合は、AWS Config コンソールまたは API から設定を構成できます。

# 用語整理

## Security Hub concepts

- Custom action

- Finding
  セキュリティチェックにより検出された検出記録。サードパーティの製品から発生することもある。（Finding は最終更新日から 90 日後に削除される 90 日を超えて保存する場合は EventBridge 経由で S3 にルーティングする必要がある）

- Insight
  集約ステートメント（データの集約方法を指定する分）とフィルター（特定の情報のみを表示させるための条件）によって定義された Findings の集合。

‐ Central configuration
委任された管理アカウントがマルチアカウント/マルチリージョンで SecurityHub の機能を一元設定するための機能。

## Central Configuration

- Home Region  
  設定ポリシーを設定ポリシーを作成・管理することでセキュリティハブの設定を一元管理するためのリージョン。
  SecurityHub の集約リージョン（Aggregation Region）としても機能し、リンク先のリージョンから findings, insights,その他のデータを受け取る。
  2019 年 3 月 20 日以降に導入するリージョンはオプトインリージョンと呼ばれる。オプトインリージョンはホームリージョンになることはできないが、リンクリージョンにはなれる。

- Linked Region
  Home Region から設定可能なリージョン。設定ポリシーはホームリージョンの管理者によって作成され、ホームリージョンと全てのリンクリージョンで有効になる。Central configuration を使用するには少なくとも１つのリンク済みリージョンを指定する必要がある。リンクされたリージョンは Home Region に対して findings, insights, その他のデータを送付する。

- Security Hub configurtation policy
  管理者が一元管理されたアカウントに対して反映可能な Security Hub の一連の設定を差す。

  1. Security Hub を有効にするか無効にするか
  2. 1 つまたは複数のセキュリティ標準を有効にするか
  3. 有効にしたセキュリティ標準の中でどのコントロールを有効にするか。管理者は有効化対象のコントロールのリストを指定でき、リストに含まれないものが無効化される。（逆に無効化対象を指定して、他を有効にすることも可能）
  4. 有効化された標準のコントロールに対してパラメータを指定することもできる
     configuration policy は少なくとも１つのアカウントか OU かルートに紐づけられたあと Home Region と Linked Region で有効になる。
     Security Hub コンソールでは委任された管理者は Security Hub の推奨構成ポリシーを選択するかカスタウ構成ポリシーを作成できる。CLI を利用する場合はカスタム構成ポリシーのみを作成可能。カスタム構成ポリシーは最大 20 個まで作成できる。

- Local configuration
  Security Hub と Organizations を連携させた際の初期設定で、管理者は新規アカウントの現在のリージョンに対してデフォルトのセキュリティ標準を自動することが選択可能。既存アカウントに関しては自動適用されないが、マニュアルで設定可能。
  デフォルトのセキュリティ標準のコントロールを個別に無効にする場合は各アカウントの各リージョンで実施する必要がある。

- アカウントまたは OU に Configuration
  Policy が直接適用されていない場合、最も近い親の構成を継承する。ポリシーの全ての要素が継承される。継承された場合、適用された設定を上書きすることはできない。
